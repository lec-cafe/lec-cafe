# サイトマップを作成する

nuxt.js でサイトマップを作っていきます。

まずはnpm経由でサイトマップ作成の為のモジュールをインストールします。

## サイトマップを使う意味
サイトマップはサイト内のリンクをまとめたページのことです。
検索エンジンと検索ユーザーがサイト内のリンクについて素早く理解することを助けるため、サイトのユーザビリティの改善や内部SEOを向上させる意味を持ちます。

```sitemap
$ npm install --save @nuxtjs/sitemap
```

次にnuxt.config.jsにモジュールを登録していきます。


```nuxt.config.js
module.exports = {
  modules: [
    '@nuxtjs/sitemap',
    ...
  ],
    ...
```

※ `...`は他のモジュールやプロパティを省略して書いています。


次にサイトマップに関する設定をnuxt.config.jsに追加していきます。

```nuxt.config.js
sitemap: {
    path: '/sitemap.xml',
    hostname: 'xxxxxxx.wordpress.com',
    generate: true,
    exclude: [
      '/example'
    ],
    routes (callback) {
      axios.get('https://xxxxxxx.wordpress.com/posts')
      .then((res) => {
        var routes = res.data.map((posts) => {
          return '/posts/' + posts.id
        })
        callback(null, routes)
      })
      .catch(callback)
    }
  },
```

それぞれのパラメーターについての解説

- path  
sitemapが生成されるパスを指定します。

- hostname  
sitemapモジュールが適用されるサイトのドメインを指定します。
 `xxxxxxx`にはwordpressサイトのドメインを入れてください。
 
- generate  
trueにするとgenerate時にdistフォルダにサイトマップが含まれます。

- exclude   
サイトマップに含めたくないURLをサイトマップから除外します。  
上記コードでは例として　`/example` を除外しています。

- routes
サイトマップに含めたいURLをサイトマップに追加します。

```routes
routes (callback) {
      axios.get('https://xxxxxxx.wordpress.com/posts')
      .then((res) => {
        var routes = res.data.map((posts) => {
          return '/posts/' + posts.id
        })
        callback(null, routes)
      })
      .catch(callback)
    }
```

上記コードでは
axiosでサイトURLをとってきた後にroutesにpostのIDを代入して、返しています。

### 関連リンク

@nuxtjs/sitemap
https://www.npmjs.com/package/@nuxtjs/sitemap


